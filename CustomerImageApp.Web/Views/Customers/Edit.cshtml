@model CustomerImageApp.Web.Models.CustomerViewModel
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Customer</title>
    <link rel="stylesheet" href="~/css/edit.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Edit Customer</h1>
            <p>Update customer information</p>
            <div class="nav-links">
                <a href="@Url.Action("List", "Customers")" class="nav-link">Back to Customers</a>
                <a href="@Url.Action("Images", "CustomerImages", new { id = Model.Id })" class="nav-link primary">View Images</a>
            </div>
        </div>

        <!-- Messages -->
        @if (TempData["ErrorMessage"] != null)
        {
            <div class="alert alert-danger">
                @TempData["ErrorMessage"]
            </div>
        }

        <!-- Validation Summary -->
        @if (!ViewData.ModelState.IsValid)
        {
            <div class="validation-summary">
                <h4>Please correct the following errors:</h4>
                <ul>
                    @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
                    {
                        <li>@error.ErrorMessage</li>
                    }
                </ul>
            </div>
        }

        <!-- Customer Info -->
        <div class="customer-info">
            <strong>Customer ID:</strong> @Model.Id | <strong>Created:</strong> @Model.CreatedAt.ToString("MMM dd, yyyy 'at' h:mm tt")
        </div>

        <!-- Form -->
        <div class="card">
            <form asp-action="Edit" asp-route-id="@Model.Id" method="post">
                @Html.AntiForgeryToken()
                @Html.HiddenFor(m => m.Id)
                @Html.HiddenFor(m => m.CreatedAt)

                <div class="form-group">
                    <label asp-for="FirstName" class="form-label">First Name *</label>
                    <input asp-for="FirstName" class="form-control @(ViewData.ModelState["FirstName"]?.Errors.Count > 0 ? "is-invalid" : "")" placeholder="Enter first name" />
                    <span asp-validation-for="FirstName" class="invalid-feedback"></span>
                </div>

                <div class="form-group">
                    <label asp-for="LastName" class="form-label">Last Name *</label>
                    <input asp-for="LastName" class="form-control @(ViewData.ModelState["LastName"]?.Errors.Count > 0 ? "is-invalid" : "")" placeholder="Enter last name" />
                    <span asp-validation-for="LastName" class="invalid-feedback"></span>
                </div>

                <div class="form-group">
                    <label asp-for="Email" class="form-label">Email Address *</label>
                    <input asp-for="Email" type="email" class="form-control @(ViewData.ModelState["Email"]?.Errors.Count > 0 ? "is-invalid" : "")" placeholder="Enter email address" />
                    <span asp-validation-for="Email" class="invalid-feedback"></span>
                </div>

                <div class="form-group">
                    <label asp-for="Phone" class="form-label">Phone Number</label>
                    <input asp-for="Phone" type="tel" class="form-control @(ViewData.ModelState["Phone"]?.Errors.Count > 0 ? "is-invalid" : "")" placeholder="Enter phone number" />
                    <span asp-validation-for="Phone" class="invalid-feedback"></span>
                </div>

                <div class="form-group">
                    <label asp-for="Company" class="form-label">Company</label>
                    <input asp-for="Company" class="form-control @(ViewData.ModelState["Company"]?.Errors.Count > 0 ? "is-invalid" : "")" placeholder="Enter company name" />
                    <span asp-validation-for="Company" class="invalid-feedback"></span>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-success">Update Customer</button>
                    <a href="@Url.Action("List", "Customers")" class="btn btn-secondary">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</body>
</html>